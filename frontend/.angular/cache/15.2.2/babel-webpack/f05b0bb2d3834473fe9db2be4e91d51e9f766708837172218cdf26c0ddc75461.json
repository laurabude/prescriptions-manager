{"ast":null,"code":"import { addDays, startOfDay, isSameDay } from 'date-fns';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/doctor.service\";\nimport * as i2 from \"angular-calendar\";\nexport class CalendarComponent {\n  constructor(doctorService) {\n    this.doctorService = doctorService;\n    this.viewDate = new Date(); // Current date\n    this.activeDayIsOpen = true;\n    this.medications = [];\n    this.medicationEvents = [];\n    this.updateCalendarEvents();\n  }\n  ngOnInit() {\n    this.doctorService.getMedicationForUser(\"laura\").subscribe(data => {\n      data.forEach(medication => {\n        this.medications.push({\n          name: medication.medication,\n          dosage: medication.dosage,\n          time: \"Now\",\n          days: [1, 2, 3]\n        });\n        this.updateCalendarEvents();\n      });\n    });\n  }\n  updateCalendarEvents() {\n    this.medicationEvents = [];\n    this.medications.forEach((medication, index) => {\n      medication.days.forEach(day => {\n        const event = {\n          start: addDays(startOfDay(this.viewDate), day - 1),\n          title: `${medication.name} - ${medication.dosage} - ${medication.time}`,\n          color: {\n            primary: '#1e90ff',\n            secondary: '#D1E8FF'\n          },\n          meta: {\n            medicationIndex: index\n          }\n        };\n        this.medicationEvents.push(event);\n      });\n    });\n  }\n  onDayClicked({\n    day\n  }) {\n    if (isSameDay(this.viewDate, day.date)) {\n      this.activeDayIsOpen = !this.activeDayIsOpen;\n    } else {\n      this.viewDate = day.date;\n      this.activeDayIsOpen = true;\n    }\n  }\n  onEventClicked({\n    event\n  }) {\n    const medicationIndex = event.meta.medicationIndex;\n    const medication = this.medications[medicationIndex];\n    console.log('Medication Clicked:', medication);\n  }\n  onEventTimesChanged({\n    event,\n    newStart,\n    newEnd\n  }) {\n    console.log('Event Times Changed:', event, newStart, newEnd);\n  }\n}\nCalendarComponent.ɵfac = function CalendarComponent_Factory(t) {\n  return new (t || CalendarComponent)(i0.ɵɵdirectiveInject(i1.DoctorService));\n};\nCalendarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CalendarComponent,\n  selectors: [[\"app-calendar\"]],\n  decls: 4,\n  vars: 4,\n  consts: [[1, \"patient-info\"], [3, \"viewDate\", \"events\", \"activeDayIsOpen\", \"dayClicked\", \"eventClicked\"]],\n  template: function CalendarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(3, \"mwl-calendar-month-view\", 1);\n      i0.ɵɵlistener(\"dayClicked\", function CalendarComponent_Template_mwl_calendar_month_view_dayClicked_3_listener($event) {\n        return ctx.onDayClicked($event);\n      })(\"eventClicked\", function CalendarComponent_Template_mwl_calendar_month_view_eventClicked_3_listener($event) {\n        return ctx.onEventClicked($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.patientName);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"viewDate\", ctx.viewDate)(\"events\", ctx.medicationEvents)(\"activeDayIsOpen\", ctx.activeDayIsOpen);\n    }\n  },\n  dependencies: [i2.CalendarMonthViewComponent],\n  styles: [\"[_nghost-%COMP%] {\\n    display: block;\\n    width: 100%;\\n    max-width: 800px;\\n    \\n    margin: auto;\\n}\\n\\n.mwl-calendar-month-view[_ngcontent-%COMP%] {\\n    width: 100%;\\n    \\n    max-width: 100%;\\n    \\n    height: 600px;\\n    \\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGNBQWM7SUFDZCxXQUFXO0lBQ1gsZ0JBQWdCO0lBQ2hCLHVDQUF1QztJQUN2QyxZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksV0FBVztJQUNYLDBEQUEwRDtJQUMxRCxlQUFlO0lBQ2YsNkRBQTZEO0lBQzdELGFBQWE7SUFDYixnQ0FBZ0M7QUFDcEMiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgbWF4LXdpZHRoOiA4MDBweDtcbiAgICAvKiBBZGp1c3QgdGhlIG1heGltdW0gd2lkdGggYXMgbmVlZGVkICovXG4gICAgbWFyZ2luOiBhdXRvO1xufVxuXG4ubXdsLWNhbGVuZGFyLW1vbnRoLXZpZXcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIC8qIFNldCB0aGUgd2lkdGggdG8gMTAwJSB0byB0YWtlIHVwIHRoZSBlbnRpcmUgY29udGFpbmVyICovXG4gICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIC8qIEVuc3VyZSB0aGUgY2FsZW5kYXIgZG9lc24ndCBleGNlZWQgdGhlIGNvbnRhaW5lcidzIHdpZHRoICovXG4gICAgaGVpZ2h0OiA2MDBweDtcbiAgICAvKiBBZGp1c3QgdGhlIGhlaWdodCBhcyBuZWVkZWQgKi9cbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["addDays","startOfDay","isSameDay","CalendarComponent","constructor","doctorService","Date","updateCalendarEvents","ngOnInit","getMedicationForUser","subscribe","data","forEach","medication","medications","push","name","dosage","time","days","medicationEvents","index","day","event","start","viewDate","title","color","primary","secondary","meta","medicationIndex","onDayClicked","date","activeDayIsOpen","onEventClicked","console","log","onEventTimesChanged","newStart","newEnd","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/Users/lauraghimici/Documents/Automatica si Informatica Aplicata /MASTER/Anul 1/Sem 1/Proiect-semestru/frontend/src/app/calendar/calendar.component.ts","/Users/lauraghimici/Documents/Automatica si Informatica Aplicata /MASTER/Anul 1/Sem 1/Proiect-semestru/frontend/src/app/calendar/calendar.component.html"],"sourcesContent":["// medication-calendar.component.ts\n\nimport { Component, OnInit } from '@angular/core';\nimport {\n  CalendarEvent,\n  CalendarMonthViewDay,\n  CalendarEventTimesChangedEvent,\n} from 'angular-calendar';\nimport { addDays, startOfDay, isSameDay } from 'date-fns';\nimport { DoctorService } from '../_services/doctor.service';\n\n@Component({\n  selector: 'app-calendar',\n  templateUrl: './calendar.component.html',\n  styleUrls: ['./calendar.component.css'],\n})\nexport class CalendarComponent implements OnInit{\n  viewDate: Date = new Date(); // Current date\n  activeDayIsOpen: boolean = true;\n\n  medications: any[] = [\n  ];\n\n  medicationEvents: CalendarEvent[] = [];\n\n  constructor(private doctorService:DoctorService) {\n    this.updateCalendarEvents();\n  }\n\n  ngOnInit(): void {\n    this.doctorService.getMedicationForUser(\"laura\").subscribe(\n      (data:any) =>{\n        data.forEach(medication => {\n          this.medications.push({name:medication.medication,dosage:medication.dosage,time:\"Now\",days:[1,2,3]});\n          this.updateCalendarEvents();\n        })\n      }\n    )\n  }\n\n  updateCalendarEvents(): void {\n    this.medicationEvents = [];\n\n    this.medications.forEach((medication, index) => {\n      medication.days.forEach((day) => {\n        const event: CalendarEvent = {\n          start: addDays(startOfDay(this.viewDate), day - 1),\n          title: `${medication.name} - ${medication.dosage} - ${medication.time}`,\n          color: { primary: '#1e90ff', secondary: '#D1E8FF' },\n          meta: { medicationIndex: index },\n        };\n\n        this.medicationEvents.push(event);\n      });\n    });\n  }\n\n  onDayClicked({ day }: { day: CalendarMonthViewDay }): void {\n    if (isSameDay(this.viewDate, day.date)) {\n      this.activeDayIsOpen = !this.activeDayIsOpen;\n    } else {\n      this.viewDate = day.date;\n      this.activeDayIsOpen = true;\n    }\n  }\n\n  onEventClicked({ event }: { event: CalendarEvent }): void {\n    const medicationIndex = event.meta.medicationIndex;\n    const medication = this.medications[medicationIndex];\n    console.log('Medication Clicked:', medication);\n  }\n\n  onEventTimesChanged({\n    event,\n    newStart,\n    newEnd,\n  }: CalendarEventTimesChangedEvent): void {\n    console.log('Event Times Changed:', event, newStart, newEnd);\n  }\n}\n","<div class=\"patient-info\">\n    <h2>{{ patientName }}</h2>\n</div>\n\n<mwl-calendar-month-view [viewDate]=\"viewDate\" [events]=\"medicationEvents\" (dayClicked)=\"onDayClicked($event)\" [activeDayIsOpen]=\"activeDayIsOpen\" (eventClicked)=\"onEventClicked($event)\">\n</mwl-calendar-month-view>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}