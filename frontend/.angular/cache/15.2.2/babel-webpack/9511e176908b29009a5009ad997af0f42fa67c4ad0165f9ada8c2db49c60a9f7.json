{"ast":null,"code":"import { addDays, startOfDay, isSameDay } from 'date-fns';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/doctor.service\";\nimport * as i2 from \"angular-calendar\";\nexport class CalendarComponent {\n  constructor(doctorService) {\n    this.doctorService = doctorService;\n    this.viewDate = new Date(); // Current date\n    this.activeDayIsOpen = true;\n    this.medications = [{\n      name: 'Medication 1',\n      dosage: '10mg',\n      time: '8:00 AM',\n      days: [1, 3, 5]\n    }, {\n      name: 'Medication 2',\n      dosage: '20mg',\n      time: '12:00 PM',\n      days: [2, 4, 6]\n    }];\n    this.medicationEvents = [];\n    this.updateCalendarEvents();\n  }\n  ngOnInit() {\n    this.doctorService.getMedicationForUser(\"laura\").subscribe(data => {\n      data.forEach(medication => {\n        this.medications.push({\n          name: medication.medication,\n          dosage: medication.dosage,\n          time: \"Now\",\n          days: [1, 2, 3]\n        });\n        this.updateCalendarEvents();\n      });\n    });\n  }\n  updateCalendarEvents() {\n    this.medicationEvents = [];\n    this.medications.forEach((medication, index) => {\n      medication.days.forEach(day => {\n        const event = {\n          start: addDays(startOfDay(this.viewDate), day - 1),\n          title: `${medication.name} - ${medication.dosage} - ${medication.time}`,\n          color: {\n            primary: '#1e90ff',\n            secondary: '#D1E8FF'\n          },\n          meta: {\n            medicationIndex: index\n          }\n        };\n        this.medicationEvents.push(event);\n      });\n    });\n  }\n  onDayClicked({\n    day\n  }) {\n    if (isSameDay(this.viewDate, day.date)) {\n      this.activeDayIsOpen = !this.activeDayIsOpen;\n    } else {\n      this.viewDate = day.date;\n      this.activeDayIsOpen = true;\n    }\n  }\n  onEventClicked({\n    event\n  }) {\n    const medicationIndex = event.meta.medicationIndex;\n    const medication = this.medications[medicationIndex];\n    // Handle event click as needed, e.g., show medication details\n    console.log('Medication Clicked:', medication);\n  }\n  onEventTimesChanged({\n    event,\n    newStart,\n    newEnd\n  }) {\n    // Handle event time changes as needed\n    console.log('Event Times Changed:', event, newStart, newEnd);\n  }\n}\nCalendarComponent.ɵfac = function CalendarComponent_Factory(t) {\n  return new (t || CalendarComponent)(i0.ɵɵdirectiveInject(i1.DoctorService));\n};\nCalendarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CalendarComponent,\n  selectors: [[\"app-calendar\"]],\n  decls: 1,\n  vars: 3,\n  consts: [[3, \"viewDate\", \"events\", \"activeDayIsOpen\", \"dayClicked\", \"eventClicked\"]],\n  template: function CalendarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mwl-calendar-month-view\", 0);\n      i0.ɵɵlistener(\"dayClicked\", function CalendarComponent_Template_mwl_calendar_month_view_dayClicked_0_listener($event) {\n        return ctx.onDayClicked($event);\n      })(\"eventClicked\", function CalendarComponent_Template_mwl_calendar_month_view_eventClicked_0_listener($event) {\n        return ctx.onEventClicked($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"viewDate\", ctx.viewDate)(\"events\", ctx.medicationEvents)(\"activeDayIsOpen\", ctx.activeDayIsOpen);\n    }\n  },\n  dependencies: [i2.CalendarMonthViewComponent],\n  styles: [\"[_nghost-%COMP%] {\\n    display: block;\\n    width: 100%;\\n    max-width: 800px;\\n    margin: auto;\\n}\\n\\n.mwl-calendar-month-view[_ngcontent-%COMP%] {\\n    width: 100%;\\n    max-width: 100%;\\n    height: 600px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGNBQWM7SUFDZCxXQUFXO0lBQ1gsZ0JBQWdCO0lBQ2hCLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxXQUFXO0lBQ1gsZUFBZTtJQUNmLGFBQWE7QUFDakIiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgbWF4LXdpZHRoOiA4MDBweDtcbiAgICBtYXJnaW46IGF1dG87XG59XG5cbi5td2wtY2FsZW5kYXItbW9udGgtdmlldyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogNjAwcHg7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["addDays","startOfDay","isSameDay","CalendarComponent","constructor","doctorService","Date","name","dosage","time","days","updateCalendarEvents","ngOnInit","getMedicationForUser","subscribe","data","forEach","medication","medications","push","medicationEvents","index","day","event","start","viewDate","title","color","primary","secondary","meta","medicationIndex","onDayClicked","date","activeDayIsOpen","onEventClicked","console","log","onEventTimesChanged","newStart","newEnd","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/Users/lauraghimici/Documents/Automatica si Informatica Aplicata /MASTER/Anul 1/Sem 1/Proiect-semestru/frontend/src/app/calendar/calendar.component.ts","/Users/lauraghimici/Documents/Automatica si Informatica Aplicata /MASTER/Anul 1/Sem 1/Proiect-semestru/frontend/src/app/calendar/calendar.component.html"],"sourcesContent":["// medication-calendar.component.ts\n\nimport { Component, OnInit } from '@angular/core';\nimport {\n  CalendarEvent,\n  CalendarMonthViewDay,\n  CalendarEventTimesChangedEvent,\n} from 'angular-calendar';\nimport { addDays, startOfDay, isSameDay } from 'date-fns';\nimport { DoctorService } from '../_services/doctor.service';\n\n@Component({\n  selector: 'app-calendar',\n  templateUrl: './calendar.component.html',\n  styleUrls: ['./calendar.component.css'],\n})\nexport class CalendarComponent implements OnInit{\n  viewDate: Date = new Date(); // Current date\n  activeDayIsOpen: boolean = true;\n\n  medications: any[] = [\n    { name: 'Medication 1', dosage: '10mg', time: '8:00 AM', days: [1, 3, 5] },\n    { name: 'Medication 2', dosage: '20mg', time: '12:00 PM', days: [2, 4, 6] },\n  ];\n\n  medicationEvents: CalendarEvent[] = [];\n\n  constructor(private doctorService:DoctorService) {\n    this.updateCalendarEvents();\n  }\n\n  ngOnInit(): void {\n    this.doctorService.getMedicationForUser(\"laura\").subscribe(\n      (data:any) =>{\n        data.forEach(medication => {\n          this.medications.push({name:medication.medication,dosage:medication.dosage,time:\"Now\",days:[1,2,3]});\n          this.updateCalendarEvents();\n        })\n      }\n    )\n  }\n\n  updateCalendarEvents(): void {\n    this.medicationEvents = [];\n\n    this.medications.forEach((medication, index) => {\n      medication.days.forEach((day) => {\n        const event: CalendarEvent = {\n          start: addDays(startOfDay(this.viewDate), day - 1),\n          title: `${medication.name} - ${medication.dosage} - ${medication.time}`,\n          color: { primary: '#1e90ff', secondary: '#D1E8FF' },\n          meta: { medicationIndex: index },\n        };\n\n        this.medicationEvents.push(event);\n      });\n    });\n  }\n\n  onDayClicked({ day }: { day: CalendarMonthViewDay }): void {\n    if (isSameDay(this.viewDate, day.date)) {\n      this.activeDayIsOpen = !this.activeDayIsOpen;\n    } else {\n      this.viewDate = day.date;\n      this.activeDayIsOpen = true;\n    }\n  }\n\n  onEventClicked({ event }: { event: CalendarEvent }): void {\n    const medicationIndex = event.meta.medicationIndex;\n    const medication = this.medications[medicationIndex];\n    // Handle event click as needed, e.g., show medication details\n    console.log('Medication Clicked:', medication);\n  }\n\n  onEventTimesChanged({\n    event,\n    newStart,\n    newEnd,\n  }: CalendarEventTimesChangedEvent): void {\n    // Handle event time changes as needed\n    console.log('Event Times Changed:', event, newStart, newEnd);\n  }\n}\n","<mwl-calendar-month-view [viewDate]=\"viewDate\" [events]=\"medicationEvents\" (dayClicked)=\"onDayClicked($event)\" [activeDayIsOpen]=\"activeDayIsOpen\" (eventClicked)=\"onEventClicked($event)\">\n</mwl-calendar-month-view>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}